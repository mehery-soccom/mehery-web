(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb8906fe"],{"051a":function(t,e,s){},"2bbb":function(t,e,s){},"2f21":function(t,e,s){"use strict";var a=s("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3287:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-content-wrapper"},[s("Sidebar"),s("div",{staticClass:"container-fluid h-100"},[s("div",{staticClass:"row h-100"},[s("div",{staticClass:"col-md-3 col-xl-3 chat"},[s("Contacts",{on:{loaded:t.closeLoading}})],1),s("div",{staticClass:"col-xl-6 chat",class:{"col-md-6":t.MyFlags.showContactProfile,"col-md-9":!t.MyFlags.showContactProfile,"col-xl-6":t.MyFlags.showContactProfile,"col-xl-9":!t.MyFlags.showContactProfile}},[s("Chatbox")],1),t.MyFlags.showContactProfile?s("div",{staticClass:"col-md-4 col-xl-3 chat"},[s("ContactProfile")],1):t._e()])])],1)},i=[],n=(s("a481"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.MyFlags.showSidebar,expression:"MyFlags.showSidebar"}],staticClass:"w3-sidebar w3-bar-block w3-white w3-card w3-animate-left",attrs:{id:"mySidebar"}},[s("div",{staticClass:"mySidebar-container"},[s("button",{staticClass:"w3-bar-item w3-large menu_btn_close fa fa-arrow-left",on:{click:function(e){t.MyFlags.showSidebar=!t.MyFlags.showSidebar}}},[t._v(" ")]),s("a",{staticClass:"w3-bar-item w3-button",attrs:{href:t.MyConst.appPrefix+"/auth/logout"}},[s("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" Logout")]),s("hr"),t._m(0),t._m(1),t._m(2),s("div",{staticClass:"sidebar-logo"})])])}),o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"w3-bar-item w3-button",attrs:{theme:"dashboard.agent.metalic",hidden:""}},[s("i",{staticClass:"fas fa-atom"}),t._v(" Metalic")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"w3-bar-item w3-button",attrs:{theme:"dashboard.agent.indigo",hidden:""}},[s("i",{staticClass:"fas fa-atom"}),t._v(" Indigo")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"w3-bar-item w3-button",attrs:{theme:"dashboard.agent.bubble",hidden:""}},[s("i",{staticClass:"fas fa-atom"}),t._v(" Bubble")])}],c=s("4776"),r=s("9d63"),l=s.n(r),d=s("2f45");var u={components:{SidebarMenu:c["SidebarMenu"],VuePerfectScrollbar:l.a},props:{sidebarbg:String},data:function(){return{MyFlags:d["c"],MyConst:d["a"]}},methods:{toggleBodyClass:function(t){var e=document.body;this.isOpen=!this.isOpen,this.isOpen?e.classList.add(t):e.classList.remove(t)},toggleSidebarHover:function(t,e){var s=document.body;this.sidebarActive=!this.sidebarActive,this.windowWidth=document.documentElement.clientWidth,this.windowWidth>"992"&&("add"===t?s.classList.add(e):s.classList.remove(e))},getWindowWidth:function(){var t=document.body;this.windowWidth=document.documentElement.clientWidth,this.windowWidth<"1350"?t.classList.add("closed-sidebar","closed-sidebar-md"):t.classList.remove("closed-sidebar","closed-sidebar-md")}},mounted:function(){this.$nextTick((function(){window.addEventListener("resize",this.getWindowWidth),this.getWindowWidth()}))},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowWidth)}},m=u,h=(s("455e"),s("2877")),p=Object(h["a"])(m,n,o,!1,null,null,null),f=p.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mb-sm-3 mb-md-0 contacts_card card-shadow"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text menu_btn",on:{click:function(e){t.MyFlags.showSidebar=!t.MyFlags.showSidebar}}},[s("i",{staticClass:"fa fa-bars"})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control search",attrs:{type:"text",placeholder:"Search...",name:""},domProps:{value:t.search},on:{keyup:t.inputSearch,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._m(0)])]),s("div",{staticClass:"card-body contacts_body"},[s("ul",{staticClass:"contacts contact-list"},t._l(t.activeChats,(function(e,a){return s("router-link",{key:a,class:{data_assigned:e.assigned,data_unassigned:!e.assigned},attrs:{tag:"li",id:e.contactId,to:"/app/chat/"+e.contactId+"/"+e.sessionId}},[s("div",{staticClass:"d-flex bd-highlight contact-preview"},[s("div",{staticClass:"img_cont"},[s("img",{staticClass:"rounded-circle user_img",attrs:{src:e.profilePic||t.MyDict.profilePic,alt:"profilpicture"}}),s("span",{staticClass:"online_icon"}),s("span",{staticClass:"contact_type fa",class:t.MyDict.social[e.contactType]})]),s("div",{staticClass:"user_info contact-text"},[s("span",{staticClass:"font-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"font-preview"},[t._v(t._s(e.lastmsg.text))])]),s("div",{staticClass:"contact-time",attrs:{title:e.lastmsg.timestamp}},[s("p",[t._v(t._s(t._f("formatDate")(e.lastmsg.timestamp))+" ")]),e.newmsg?s("div",{staticClass:"new-message",attrs:{id:"'nm' + c.contactId"}},[s("p",[t._v(" ")])]):t._e()])])])})),1),s("ul",{staticClass:"contacts contact-list-unassigned"})]),s("div",{staticClass:"card-footer"},[t._v("\n         "),s("span",{staticClass:"contact_type fa fa-facebook"}),s("span",{staticClass:"contact_type fa fa-whatsapp"}),s("span",{staticClass:"contact_type fa fa-twitter"}),s("span",{staticClass:"contact_type fa fa-telegram"}),s("span",{staticClass:"contact_type fa fa-chrome"}),s("span",{staticClass:"online-toggle fa fa-toggle-on",class:{"toggle-active":t.isOnline},on:{click:t.toggleOnline}})])])},v=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text search_btn"},[s("i",{staticClass:"fa fa-search"})])])}],_=(s("96cf"),s("3b8d")),C=(s("7f7f"),s("55dd"),s("386d"),s("ecee")),b=s("ad3d"),y={components:{"font-awesome-icon":b["a"]},computed:{activeChats:function(){console.log("store",this.$store.getters.StateChats);var t=this.search;return(this.$store.getters.StateChats||[]).filter((function(e){return(e.name||"").toLowerCase().indexOf(t.toLowerCase())>-1&&e.active})).sort((function(t,e){return t.assigned&&!e.assigned?-1:!t.assigned&&e.assigned?1:e.lastInComingStamp-t.lastInComingStamp}))},isOnline:function(){return!!this.$store.getters.StateMeta&&this.$store.getters.StateMeta.isOnline}},data:function(){return{MyFlags:d["c"],MyDict:d["b"],MyConst:d["a"],search:""}},mounted:function(){console.log("loading..."),this.loadChats()},watch:{"$route.params.sessionId":function(t){this.$forceUpdate()}},methods:{loadChats:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("GetChats");case 2:this.$emit("loaded",{});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toggleOnline:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("OnlineStatus");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),inputSearch:function(){},loadQuickReply:function(){}}},w=y,S=(s("c88d"),Object(h["a"])(w,g,v,!1,null,"6244dd7a",null)),x=S.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-shadow"},[s("div",{staticClass:"card-header msg_head chat-head"},[s("div",{staticClass:"d-flex bd-highlight"},[t.activeChat?s("div",{staticClass:"img_cont",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}}),s("span",{staticClass:"online_icon",attrs:{hidden:""}})]):t._e(),t.activeChat?s("div",{staticClass:"user_info",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("span",{staticClass:"user_name"},[t._v(t._s(t.activeChat.name))]),t.activeChat.ilastmsg?s("p",{staticClass:"user_text"},[t._v(t._s(t._f("formatDate")(t.activeChat.ilastmsg.timestamp))+" ")]):t._e()]):t._e(),t._m(0),s("div",{staticClass:"chat_actions",attrs:{hidden:""}},[s("button",{staticClass:"btn",attrs:{title:"Close Chat"},on:{click:t.closSession}},[s("i",{staticClass:"fa fa-check-circle"})])])]),s("div",{on:{mouseover:function(e){t.showChatOptions=!0},mouseleave:function(e){t.showChatOptions=!1}}},[t._m(1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showChatOptions,expression:"showChatOptions"}],staticClass:"action_menu"},[s("ul",{staticStyle:{"padding-top":"10px"}},[s("li",{on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("i",{staticClass:"fas fa-user-circle"}),t._v(" Chat Hisotry")]),s("li",{on:{click:t.closSession}},[s("i",{staticClass:"fa fa-check-circle"}),t._v(" Resolve Ticket")])])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMediaOptions,expression:"!showMediaOptions"}],staticClass:"card-body msg_card_body"},[s("div",{staticClass:"msg_card_body-bubbles"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots",opacity:.3,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t.activeChat?t.activeChat?t._l(t.activeChat.messages,(function(e){return s("div",[e.type?s("div",{staticClass:"d-flex justify-content-end mb-4 chat-bubble",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[e.messageId?t._e():s("i",{staticClass:"sending fa fa-spinner fa-spin"},[t._v(" ")]),s("div",{staticClass:"msg_cotainer_send"},[s("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?s("div",[s("span",{staticClass:"fa fa-paperclip"}),t._v(" "+t._s(e.template)+" \n                "),s("div",{staticClass:"input-group my-attachments"},t._l(e.attachments,(function(e){return s("img",{attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):e.template?s("div",[s("span",{staticClass:"fa fa-tag"}),t._v(" "+t._s(e.template)+"\n            ")]):t._e(),s("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("formatDate")(e.timestamp))+"  "),s("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))])])]),t._m(3,!0)]):s("div",{staticClass:"d-flex justify-content-start mb-4 chat-bubble"},[t._m(2,!0),s("div",{staticClass:"msg_cotainer"},[s("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))])]),s("span",{staticClass:"msg_time"},[s("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))]),t._v("  "+t._s(t._f("formatDate")(e.timestamp)))])])])})):t._e():s("div",{staticClass:"msg_card_body-logo"})],2),t.activeChat&&t.activeChat.active?s("div",{staticClass:"msg_card_body-panel"},[s("hr"),s("div",{staticClass:"msg_card_body-panel-tags"},t._l(t.quickReplies,(function(e){return t.quickReplies?s("span",{staticClass:"msg_cotainer_smart",on:{click:t.sendQuickReply}},[t._v("  "+t._s(e.id.subject))]):t._e()})),0)]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMediaOptions,expression:"showMediaOptions"}],staticClass:"card-body media_card_body"},[s("div",{staticClass:"media_card_body-bubbles"},[s("div",{staticClass:"media_card_body-bubbles-wrapper"},t._l(t.mediaOptions,(function(e){return s("div",{staticClass:"media_thumb"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedMedia,expression:"selectedMedia"}],attrs:{id:"mdeia-"+e.name,type:"radio",name:"media"},domProps:{value:e.name,checked:t._q(t.selectedMedia,e.name)},on:{change:function(s){t.selectedMedia=e.name}}}),s("label",{staticClass:"media_thumb_label",attrs:{for:"mdeia-"+e.name}},[s("img",{attrs:{src:t._f("thumburl")(e.url)}})])])})),0)]),t._m(4)]),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"input-group my-input-section",class:{fade:!t.sendEnabled}},[s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text attach_btn",on:{click:function(e){t.showMediaOptions=!t.showMediaOptions}}},[s("i",{staticClass:"fa fa-paperclip"})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message_text,expression:"message_text"}],staticClass:"form-control type_msg input-message",attrs:{name:"",placeholder:"Type your message...",autocomplete:"off",disabled:!t.inputTextEnabled},domProps:{value:t.message_text},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.newline(e):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onSendMessage(e)},input:function(e){e.target.composing||(t.message_text=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text send_btn",on:{click:t.onSendMessage}},[s("i",{staticClass:"fa fa-location-arrow"})])])])])])},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"video_cam"},[s("span",[s("i",{staticClass:"fas fa-video",attrs:{hidden:""}})]),s("span",[s("i",{staticClass:"fas fa-phone",attrs:{hidden:""}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{attrs:{id:"action_menu_btn"}},[s("i",{staticClass:"fas fa-ellipsis-v"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img_cont_msg"},[s("img",{staticClass:"rounded-circle user_img_msg",attrs:{src:"assets/images/profile.png"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img_cont_msg"},[s("img",{staticClass:"rounded-circle user_img_msg",attrs:{src:"assets/images/profile.png"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"media_card_body-panel hidden"},[s("hr"),s("div",{staticClass:"media_card_body-panel-actions"},[s("span",{staticClass:"media_cotainer_smart"},[t._v("Cancel")]),s("span",{staticClass:"media_cotainer_smart"},[t._v("Send")])])])}],I=s("9062"),$=s.n(I),O={components:{"font-awesome-icon":b["a"],Loading:$.a},computed:{inputTextEnabled:function(t){return!!this.$route.params.contactId&&!!this.activeChat&&this.activeChat.active},sendEnabled:function(t){return!!this.$route.params.contactId&&!!this.activeChat&&this.activeChat.active},activeChat:function(){for(var t in console.log("id",this.$route.params.contactId,this.$route.params.sessionId),this.$store.getters.StateChats){var e=this.$store.getters.StateChats[t];if(this.$route.params.sessionId==e.sessionId)return e}for(var t in this.$store.getters.StateChatHistory){e=this.$store.getters.StateChatHistory[t];if(this.$route.params.sessionId==e.sessionId)return e}return null},mediaOptions:function(){return console.log("mediaOptions=",this.$store.getters.StateMediaOptions),this.$store.getters.StateMediaOptions}},data:function(){return{message_text:"",quickReplies:null,selectedMedia:null,showMediaOptions:!1,showChatOptions:!1,lastMessageId:null,ilastMessageId:null,MyDict:d["b"],MyFlags:d["c"],MyConst:d["a"],isLoading:!1}},created:function(){console.log("loading..."),this.loadMediaOptions(),this.scrollToBottom()},updated:function(){this.scrollToBottom(),this.loadQuickReplies()},mounted:function(){this.scrollToBottom(),this.loadQuickReplies()},watch:{"$route.params.contactId":function(t){this.scrollToBottom(),this.loadQuickReplies()},"$route.params.sessionId":function(t){this.loadMessages()}},methods:{sendText:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(e,s){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.activeChat,a){t.next=3;break}return t.abrupt("return");case 3:if(e||s){t.next=5;break}return t.abrupt("return");case 5:return i=a.sessionId,n={text:e,type:!0,timestamp:(new Date).getTime(),sender:d["a"].agent,name:d["a"].agent,messageId:"",sessionId:i,template:s},this.scrollToBottom(),t.prev=8,console.log("beforeSendcta"),t.next=12,this.$store.dispatch("SendChat",n);case 12:o=t.sent,console.log("resp",o),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](8),console.error(t.t0),n.logs=["Error While Sending"];case 20:this.scrollToBottom();case 21:case"end":return t.stop()}}),t,this,[[8,16]])})));function e(e,s){return t.apply(this,arguments)}return e}(),onSendMessage:function(){this.sendText(this.message_text,this.showMediaOptions?this.selectedMedia:null),this.message_text="",this.showMediaOptions=!1},newline:function(t){this.value="".concat(this.message_text,"\n")},sendQuickReply:function(t){this.sendText(event.target.innerText,this.showMediaOptions?this.selectedMedia:null)},closSession:function(){this.sendText("/exit_chat"),this.$router.push("/app/chat")},scrollToBottom:function(t){var e=this.activeChat;if(e){var s=e.messages;if(s&&s.length){var a=s[s.length-1].messageId;if(this.lastMessageId!=a){this.lastMessageId=a;var i=document.querySelector(".msg_card_body");i&&(console.log("updating",i.scrollTop,i.scrollHeight),i.scrollTop=i.scrollHeight)}}}},loadMediaOptions:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadMediaOptions");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadQuickReplies:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.activeChat,e){t.next=3;break}return t.abrupt("return");case 3:if(s=e.ilastmsg,s){t.next=6;break}return t.abrupt("return");case 6:if(this.ilastMessageId!=s.messageId){t.next=8;break}return t.abrupt("return");case 8:return this.ilastMessageId=s.messageId,t.next=11,this.$store.dispatch("LoadQuickReplies",s.tags);case 11:a=t.sent,this.quickReplies=a;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMessages:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("loadMessages..."),e=this.activeChat,e){t.next=4;break}return t.abrupt("return");case 4:if(e.messages||e.active){t.next=13;break}return console.log("GetSessionChats..."),this.isLoading=!0,t.next=9,this.$store.dispatch("GetSessionChats",{contactId:this.activeChat.contactId,sessionId:this.activeChat.sessionId,contactType:this.activeChat.contactType,name:this.activeChat.name});case 9:s=t.sent,console.log("resp",s),e.messages=s,this.isLoading=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},R=O,T=Object(h["a"])(R,k,M,!1,null,null,null),E=T.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mb-sm-3 mb-md-0 card_contact_profile"},[s("div",{staticClass:"card-header"},[s("center",[t._v("History")])],1),s("div",{staticClass:"card-body vld-parent"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots","is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),s("div",{staticClass:"information",staticStyle:{display:"flex"},attrs:{hidden:""}},[s("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}})]),s("small",[s("b-table",{attrs:{id:"agent-session-list",striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,responsive:!0,borderless:!0,items:t.sessions.items,fields:t.sessions.fields},scopedSlots:t._u([{key:"cell(assignedToAgent)",fn:function(e){return["BOT"==e.item.mode?s("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"robot"}}):t._e(),"AGENT"==e.item.mode?s("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"user"}}):t._e(),t._v("\n                     "+t._s(e.item.assignedToAgent)+"\n                ")]}},{key:"cell(time)",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatDate")(e.item.startSessionStamp||e.item.fistResponseStamp||e.item.lastInComingStamp||e.item.assignedDeptStamp||e.item.assignedAgentStamp||e.item.lastResponseStamp||e.item.closeSessionStamp))+"\n                ")]}},{key:"cell(contactType)",fn:function(e){return[s("span",{staticClass:"contact_type fa",class:t.MyDict.social[e.item.contactType]})]}},{key:"cell(startSessionStamp)",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatDate")(e.item.startSessionStamp))+"\n                ")]}},{key:"cell(fistResponseStamp)",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatDate")(e.item.fistResponseStamp))+" \n                ")]}},{key:"cell(closeSessionStamp)",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatDate")(e.item.closeSessionStamp))+"\n                    "),e.item.active?s("font-awesome-icon",{style:{color:"green"},attrs:{icon:"circle"}}):t._e()]}},{key:"cell(actions)",fn:function(e){return[s("router-link",{staticClass:"btn btn-outline-primary btn-xs",attrs:{tag:"button",id:e.item.sessionId,to:"/app/chat/"+e.item.contactId+"/"+e.item.sessionId,"active-class":"disabled"}},[t._v("\n                            View Chat\n                 ")])]}}])})],1)],1),s("div",{staticClass:"card-footer"},[s("div",[s("p",[t._v(t._s(t.activeChat.name))])]),s("div",[t.activeChat.email?s("p",[s("span",{staticClass:"fa fa-envelope"}),t._v(" "+t._s(t.activeChat.email))]):t._e()]),s("div",[t.activeChat.phone?s("p",[s("span",{staticClass:"fa fa-phone"}),t._v(" "+t._s(t.activeChat.phone))]):t._e()]),t._m(0)])])},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"listGroups"}},[s("h1")])}],F={components:{Loading:$.a},computed:{activeChat:function(){for(var t in console.log("id",this.$route.params.contactId),this.$store.getters.StateChats){var e=this.$store.getters.StateChats[t];if(this.$route.params.contactId==e.contactId)return e}return{}}},data:function(){return{MyDict:d["b"],MyFlags:d["c"],MyConst:d["a"],sessions:{fields:[{key:"contactType",label:""},{key:"time",label:" "},{key:"actions",label:" "}],items:[],perPage:25,currentPage:1,rows:0},isLoading:!1}},created:function(){console.log("loading...")},updated:function(){},mounted:function(){this.getSessions()},watch:{"$route.params.contactId":function(t){this.getSessions()}},methods:{getSessions:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.activeChat){t.next=2;break}return t.abrupt("return");case 2:return this.isLoading=!0,t.next=5,this.$store.dispatch("GetSessions",{contactId:this.activeChat.contactId,contactType:this.activeChat.contactType});case 5:e=t.sent,this.sessions.items=(e||[]).sort((function(t,e){return(e.startSessionStamp||e.fistResponseStamp||e.lastInComingStamp||e.assignedDeptStamp||e.assignedAgentStamp||e.lastResponseStamp||e.closeSessionStamp)-(t.startSessionStamp||t.fistResponseStamp||t.lastInComingStamp||t.assignedDeptStamp||t.assignedAgentStamp||t.lastResponseStamp||t.closeSessionStamp)})),this.sessions.rows=this.sessions.items.length,console.log("sessions",e,this.sessions),this.isLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},D=F,j=Object(h["a"])(D,L,P,!1,null,null,null),W=j.exports,A=s("c074");C["c"].add(A["z"]);var K={name:"app",components:{Contacts:x,Chatbox:E,ContactProfile:W,Sidebar:f,VuePerfectScrollbar:l.a,"font-awesome-icon":b["a"]},data:function(){return{MyFlags:d["c"]}},mounted:function(){},methods:{closeLoading:function(t){var e=document.getElementsByTagName("html")[0];e.className=e.className.replace(/\loading\b/g,"")}}},B=K,N=(s("701f"),Object(h["a"])(B,a,i,!1,null,null,null));e["default"]=N.exports},"386d":function(t,e,s){"use strict";var a=s("cb7c"),i=s("83a1"),n=s("5f1b");s("214f")("search",1,(function(t,e,s,o){return[function(s){var a=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,a):new RegExp(s)[e](String(a))},function(t){var e=o(s,t,this);if(e.done)return e.value;var c=a(t),r=String(this),l=c.lastIndex;i(l,0)||(c.lastIndex=0);var d=n(c,r);return i(c.lastIndex,l)||(c.lastIndex=l),null===d?-1:d.index}]}))},"455e":function(t,e,s){"use strict";s("2bbb")},"55dd":function(t,e,s){"use strict";var a=s("5ca1"),i=s("d8e8"),n=s("4bf8"),o=s("79e5"),c=[].sort,r=[1,2,3];a(a.P+a.F*(o((function(){r.sort(void 0)}))||!o((function(){r.sort(null)}))||!s("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(n(this)):c.call(n(this),i(t))}})},"701f":function(t,e,s){"use strict";s("8057")},8057:function(t,e,s){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a481:function(t,e,s){"use strict";var a=s("cb7c"),i=s("4bf8"),n=s("9def"),o=s("4588"),c=s("0390"),r=s("5f1b"),l=Math.max,d=Math.min,u=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};s("214f")("replace",2,(function(t,e,s,f){return[function(a,i){var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n,i):s.call(String(n),a,i)},function(t,e){var i=f(s,t,this,e);if(i.done)return i.value;var u=a(t),m=String(this),h="function"===typeof e;h||(e=String(e));var v=u.global;if(v){var _=u.unicode;u.lastIndex=0}var C=[];while(1){var b=r(u,m);if(null===b)break;if(C.push(b),!v)break;var y=String(b[0]);""===y&&(u.lastIndex=c(m,n(u.lastIndex),_))}for(var w="",S=0,x=0;x<C.length;x++){b=C[x];for(var k=String(b[0]),M=l(d(o(b.index),m.length),0),I=[],$=1;$<b.length;$++)I.push(p(b[$]));var O=b.groups;if(h){var R=[k].concat(I,M,m);void 0!==O&&R.push(O);var T=String(e.apply(void 0,R))}else T=g(k,m,M,I,O,e);M>=S&&(w+=m.slice(S,M)+T,S=M+k.length)}return w+m.slice(S)}];function g(t,e,a,n,o,c){var r=a+t.length,l=n.length,d=h;return void 0!==o&&(o=i(o),d=m),s.call(c,d,(function(s,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(r);case"<":c=o[i.slice(1,-1)];break;default:var d=+i;if(0===d)return s;if(d>l){var m=u(d/10);return 0===m?s:m<=l?void 0===n[m-1]?i.charAt(1):n[m-1]+i.charAt(1):s}c=n[d-1]}return void 0===c?"":c}))}}))},c88d:function(t,e,s){"use strict";s("051a")}}]);